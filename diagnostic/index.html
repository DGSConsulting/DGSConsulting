<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tech Stack Diagnostic ‚Äî DGS Consulting</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0a0e17; --card:#141824; --accent:#06B6D4; --accent-2:#8b5cf6; --accent-glow: rgba(6,182,212,0.22);
  --text:#e2e8f0; --muted:#94a3b8; --success:#10b981; --danger:#ef4444; --glass: rgba(255,255,255,0.03);
  --max-width:980px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
.bg-gradient{position:fixed;inset:0;background: radial-gradient(circle at 20% 50%, rgba(6,182,212,0.12), transparent 35%), radial-gradient(circle at 80% 80%, rgba(139,92,246,0.08), transparent 35%);pointer-events:none;z-index:0;}
.container{position:relative;z-index:1;max-width:var(--max-width);margin:32px auto;padding:28px}
.card{background:var(--card);border-radius:20px;padding:36px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 20px 60px rgba(0,0,0,0.6);overflow:hidden;backdrop-filter:blur(6px)}

.hero{display:flex;align-items:flex-start;gap:24px;flex-wrap:wrap;margin-bottom:22px}
.hero-left{flex:1;min-width:260px}
.badge{display:inline-block;padding:8px 14px;border-radius:18px;background:rgba(6,182,212,0.07);border:1px solid var(--accent);font-weight:600;color:var(--accent);margin-bottom:12px}
h1{font-size:clamp(1.6rem,3.6vw,2.6rem);line-height:1.05;margin-bottom:8px;background:linear-gradient(135deg,#fff,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sub{color:var(--muted);font-size:1rem;max-width:720px}
.hero-stats{display:flex;gap:18px;margin-top:14px;flex-wrap:wrap}
.stat{display:flex;flex-direction:column;align-items:flex-start}
.stat .num{font-weight:800;color:var(--accent)}
.stat .lbl{color:var(--muted);font-size:0.85rem}

.progress-wrap{margin:20px 0}
.progress-top{display:flex;justify-content:space-between;align-items:center;gap:12px}
.step-indicator{font-weight:700;color:var(--accent);}
.time-est{color:var(--muted);font-size:0.9rem}
.progress-bar{height:10px;background:rgba(255,255,255,0.06);border-radius:999px;margin-top:12px;overflow:hidden;transition:all 0.4s ease}
.progress-bar > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));box-shadow:0 6px 18px var(--accent-glow);transition:width .35s ease}

form{margin-top:14px}
.section{display:none;animation:fadeIn .36s ease;}
.section.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

.section-header{margin-bottom:18px}
.section-title{font-size:1.2rem;font-weight:700}
.section-desc{color:var(--muted);margin-top:6px}

.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.full{grid-column:1/-1}
.input,select,textarea{width:100%;padding:12px 14px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.06);color:var(--text);font-size:15px}
textarea{min-height:110px;resize:vertical}
label.form-label{display:block;margin-bottom:8px;font-weight:600}

.choice-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px}
.choice{background:transparent;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);cursor:pointer;display:flex;gap:10px;align-items:center;transition:all 0.2s ease}
.choice input{display:none}
.choice .text{font-weight:600}
.choice.selected{border-color:var(--accent);box-shadow:0 6px 20px var(--accent-glow);background:rgba(6,182,212,0.06)}

.actions{display:flex;gap:12px;margin-top:18px}
.btn{padding:12px 18px;border-radius:10px;border:none;font-weight:800;cursor:pointer;transition:all 0.2s ease}
.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#042029;box-shadow:0 10px 30px rgba(6,182,212,0.12)}
.btn-primary:hover{transform:scale(1.02)}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
.btn-wide{flex:1}

.savings-preview{margin-top:18px;padding:14px;border-radius:12px;border:1px dashed rgba(255,255,255,0.04);background:linear-gradient(135deg, rgba(16,185,129,0.04), rgba(6,182,212,0.02));transition:all 0.3s ease}
.savings-large{font-weight:900;font-size:1.6rem;color:var(--success)}
.muted{color:var(--muted)}

.error{background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.12);padding:10px;border-radius:8px;color:var(--danger);margin-bottom:10px}

.footer-note{margin-top:18px;color:var(--muted);font-size:0.9rem}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:9999}
.overlay.active{display:flex}
.modal{background:var(--card);padding:24px;border-radius:14px;border:1px solid var(--accent);max-width:520px;text-align:center}
.modal h3{font-size:1.2rem;margin-bottom:8px}

.success{display:none;text-align:center;padding:28px}
.success.active{display:block}
.download{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--accent);color:var(--accent);font-weight:700}

@media(max-width:820px){.grid{grid-template-columns:1fr}.hero{flex-direction:column}.container{padding:18px}}
</style>
</head>
<body>
<div class="bg-gradient"></div>
<div class="container">
<div class="card" id="mainCard">

  <div class="hero">
    <div class="hero-left">
      <div class="badge">‚ö° Real-Time Waste Calculator</div>
      <h1>Find $5,000+ in Hidden Software Waste</h1>
      <div class="sub">Most small teams overspend by ~30%. This 3-minute diagnostic shows where your tech stack leaks cash.</div>

      <div class="hero-stats" style="margin-top:12px">
        <div class="stat"><div class="num">$8.4M</div><div class="lbl">Saved for clients</div></div>
        <div class="stat"><div class="num">500+</div><div class="lbl">Businesses optimized</div></div>
        <div class="stat"><div class="num">34%</div><div class="lbl">Avg. cost reduction</div></div>
      </div>
    </div>

    <div style="min-width:220px;display:flex;flex-direction:column;align-items:flex-end;gap:8px">
      <div class="step-indicator">Step <span id="currentStep">1</span> of <span id="totalSteps">5</span></div>
      <div class="time-est" id="timeEstimate">‚è±Ô∏è About 3 minutes</div>
      <div style="width:220px;margin-top:12px">
        <div class="progress-bar" aria-hidden><i id="progressFill"></i></div>
      </div>
      <button class="btn btn-ghost" id="expressBtn" style="margin-top:8px">‚ö° Express Mode ‚Äî 60s</button>
    </div>
  </div>

  <!-- Form Sections -->
  <form id="diagForm">

    <!-- Section 1: Business Overview -->
    <section class="section active" data-step="1" id="s1">
      <div class="section-header">
        <div class="section-title">Business Overview</div>
        <div class="section-desc">Quick context so our numbers match your reality.</div>
      </div>
      <div class="grid">
        <div>
          <label class="form-label">Company name <span class="muted">(optional)</span></label>
          <input class="input" name="company" id="company" placeholder="Acme Co." />
        </div>
        <div>
          <label class="form-label">Industry</label>
          <select class="input" name="industry" id="industry" required>
            <option value="">Choose...</option>
            <option value="saas">SaaS / Tech</option>
            <option value="ecommerce">E-commerce</option>
            <option value="agency">Agency</option>
            <option value="professional">Professional Services</option>
            <option value="healthcare">Healthcare</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div>
          <label class="form-label">Team size</label>
          <select class="input" name="team" id="team" required>
            <option value="">Choose...</option>
            <option value="1-5">1-5</option>
            <option value="6-20">6-20</option>
            <option value="21-50">21-50</option>
            <option value="51-200">51-200</option>
            <option value="200+">200+</option>
          </select>
        </div>
        <div>
          <label class="form-label">Primary goal</label>
          <select class="input" name="goal" id="goal">
            <option value="">Choose...</option>
            <option value="cost">Cut costs</option>
            <option value="time">Save team time</option>
            <option value="adoption">Improve adoption</option>
            <option value="consolidate">Consolidate tools</option>
            <option value="other">Other</option>
          </select>
        </div>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-primary btn-wide nextBtn">Next ‚Üí</button>
      </div>
    </section>

    <!-- Section 2: Current Tools -->
    <section class="section" data-step="2" id="s2">
      <div class="section-header">
        <div class="section-title">Current Tools</div>
        <div class="section-desc">Which software do you currently use?</div>
      </div>
      <div class="choice-grid" id="toolsGrid">
        <label class="choice"><input type="checkbox" value="Slack"><span class="text">Slack</span></label>
        <label class="choice"><input type="checkbox" value="Zoom"><span class="text">Zoom</span></label>
        <label class="choice"><input type="checkbox" value="Asana"><span class="text">Asana</span></label>
        <label class="choice"><input type="checkbox" value="Trello"><span class="text">Trello</span></label>
        <label class="choice"><input type="checkbox" value="Notion"><span class="text">Notion</span></label>
        <label class="choice"><input type="checkbox" value="Google Workspace"><span class="text">Google Workspace</span></label>
        <label class="choice"><input type="checkbox" value="Other"><span class="text">Other</span></label>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-ghost prevBtn">‚Üê Back</button>
        <button type="button" class="btn btn-primary nextBtn">Next ‚Üí</button>
      </div>
    </section>

    <!-- Section 3: Usage & Cost -->
    <section class="section" data-step="3" id="s3">
      <div class="section-header">
        <div class="section-title">Usage & Cost</div>
        <div class="section-desc">Estimate your monthly spend per tool.</div>
      </div>
      <div class="grid" id="costInputs">
        <!-- Inputs dynamically generated by JS -->
      </div>
      <div class="savings-preview" id="previewBox">
        Estimated SaaS waste: <span class="savings-large" id="wasteAmt">$0</span>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-ghost prevBtn">‚Üê Back</button>
        <button type="button" class="btn btn-primary nextBtn">Next ‚Üí</button>
      </div>
    </section>

    <!-- Section 4: Goals & Notes -->
    <section class="section" data-step="4" id="s4">
      <div class="section-header">
        <div class="section-title">Goals & Notes</div>
        <div class="section-desc">Anything specific we should focus on?</div>
      </div>
      <div class="grid">
        <div class="full">
          <label class="form-label">Additional notes</label>
          <textarea id="notes" placeholder="e.g., reduce admin overhead, consolidate subscriptions..."></textarea>
        </div>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-ghost prevBtn">‚Üê Back</button>
        <button type="button" class="btn btn-primary nextBtn">Next ‚Üí</button>
      </div>
    </section>

    <!-- Section 5: Email & Download -->
    <section class="section" data-step="5" id="s5">
      <div class="section-header">
        <div class="section-title">Get Your Free Report</div>
        <div class="section-desc">Enter your email to download the PDF with personalized insights.</div>
      </div>
      <div class="grid">
        <div class="full">
          <label class="form-label">Email</label>
          <input class="input" type="email" id="email" required placeholder="your@email.com">
        </div>
      </div>
      <div class="actions">
        <button type="button" class="btn btn-ghost prevBtn">‚Üê Back</button>
        <button type="submit" class="btn btn-primary btn-wide">Download PDF ‚Üí</button>
      </div>
    </section>

  </form>

  <!-- Success / Download -->
  <div class="success" id="successBox">
    <div style="font-size:2rem;font-weight:900;color:var(--success)">üéâ Report ready</div>
    <p class="muted" style="margin-top:10px">We prepared a personalized diagnostic. Download the PDF or schedule a walkthrough.</p>
    <div style="margin-top:16px">
      <a id="downloadPDF" class="download" href="#">Download PDF</a>
    </div>
    <div class="footer-note">Or <a href="#" id="bookCall" style="color:var(--accent)">book a 15-min walkthrough</a></div>
  </div>

</div>
</div>

<!-- Exit Modal -->
<div class="overlay" id="exitModal">
  <div class="modal">
    <h3>You're 60% done ‚Äî want this free report?</h3>
    <p class="muted">Finish the diagnostic to get a PDF with exact savings and next steps.</p>
    <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
      <button class="btn btn-ghost" id="closeExit">Keep browsing</button>
      <button class="btn btn-primary" id="resumeExit">Resume ‚Üí</button>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="container">
    <p style="margin:6px 0;">¬© 2025 DGS Consulting ‚Ä¢ Clarity over complexity ‚Ä¢ Founded by Darren Snook ‚Ä¢ Ottawa, ON</p>
    <p style="margin:6px 0;">
      <a href="/Services/index.html">Services</a> ¬∑
      <a href="/case-studies/index.html">Case Studies</a> ¬∑
      <a href="mailto:DGSConsult@consultant.com">Contact</a> ¬∑
      <a href="https://dgsconsulting.youcanbook.me" target="_blank" rel="noopener">Book</a>
    </p>
  </div>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// Full JS logic including:
// - Section navigation, progress, choice selection
// - Dynamic preview calculations
// - Express mode toggle
// - LocalStorage persistence
// - Exit modal trigger
// - PDF generation with insights

document.addEventListener('DOMContentLoaded',()=>{
  const form=document.getElementById('diagForm');
  const sections=document.querySelectorAll('.section');
  const progressFill=document.getElementById('progressFill');
  const currentStepEl=document.getElementById('currentStep');
  const totalSteps=sections.length;
  const expressBtn=document.getElementById('expressBtn');
  let currentStep=0;
  let expressMode=false;
  const storageKey='diagProgress';

  const toolsGrid=document.getElementById('toolsGrid');
  const costInputs=document.getElementById('costInputs');
  const previewBox=document.getElementById('wasteAmt');

  function saveProgress(){
    const data={};
    form.querySelectorAll('input,select,textarea').forEach(el=>{data[el.id]=el.value});
    data.tools=[...form.querySelectorAll('#toolsGrid input:checked')].map(i=>i.value);
    localStorage.setItem(storageKey,JSON.stringify(data));
  }

  function loadProgress(){
    const data=JSON.parse(localStorage.getItem(storageKey)||'{}');
    if(Object.keys(data).length){
      Object.entries(data).forEach(([k,v])=>{
        const el=document.getElementById(k);
        if(el) el.value=v;
      });
      if(data.tools){
        form.querySelectorAll('#toolsGrid input').forEach(i=>{i.checked=data.tools.includes(i.value);});
      }
      updateCostInputs();
      updatePreview();
    }
  }

  function showStep(n){
    sections.forEach(s=>s.classList.remove('active'));
    sections[n].classList.add('active');
    currentStepEl.textContent=n+1;
    progressFill.style.width=`${((n+1)/totalSteps)*100}%`;
  }

  function updateCostInputs(){
    costInputs.innerHTML='';
    form.querySelectorAll('#toolsGrid input:checked').forEach(tool=>{
      const div=document.createElement('div');
      div.innerHTML=`<label class="form-label">${tool.value} monthly ($)</label>
        <input type="number" min="0" class="input costInput" data-tool="${tool.value}" value="0">`;
      costInputs.appendChild(div);
    });
  }

  function updatePreview(){
    let total=0;
    form.querySelectorAll('.costInput').forEach(i=>{
      total+=parseFloat(i.value)||0;
    });
    const waste=Math.round(total*0.22); // example: 22% overspending
    previewBox.textContent=`$${waste.toLocaleString()}`;
  }

  // Section navigation
  form.querySelectorAll('.nextBtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(currentStep<sections.length-1){
        currentStep++;
        showStep(currentStep);
      }
    });
  });
  form.querySelectorAll('.prevBtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(currentStep>0){
        currentStep--;
        showStep(currentStep);
      }
    });
  });

  // Tool selection
  toolsGrid.querySelectorAll('.choice input').forEach(i=>{
    i.addEventListener('change',()=>{
      updateCostInputs(); updatePreview(); saveProgress();
    });
  });

  costInputs.addEventListener('input',e=>{
    if(e.target.classList.contains('costInput')){
      updatePreview(); saveProgress();
    }
  });

  expressBtn.addEventListener('click',()=>{
    expressMode=!expressMode;
    expressBtn.textContent=expressMode?'‚ö° Express Mode ‚Äî ON':'‚ö° Express Mode ‚Äî 60s';
  });

  // PDF generation
  form.addEventListener('submit',e=>{
    e.preventDefault();
    const { jsPDF } = window.jspdf;
    const doc=new jsPDF();
    const company=form.company.value||'';
    const email=form.email.value||'';
    const waste=previewBox.textContent;
    doc.setFontSize(16);
    doc.text('Tech Stack Waste Diagnostic',14,22);
    doc.setFontSize(12);
    doc.text(`Company: ${company}`,14,32);
    doc.text(`Email: ${email}`,14,40);
    doc.text(`Estimated waste: ${waste}`,14,48);
    doc.text('Tools:',14,56);
    let y=64;
    form.querySelectorAll('#toolsGrid input:checked').forEach(i=>{
      doc.text(`- ${i.value}`,16,y); y+=8;
    });
    doc.text('Additional notes:',14,y+4);
    doc.text(form.notes.value||'None',16,y+12);
    doc.save('DGS-Tech-Stack-Report.pdf');

    document.getElementById('mainCard').style.display='none';
    document.getElementById('successBox').classList.add('active');
    confetti({particleCount:100,spread:70});
  });

  loadProgress();
  showStep(currentStep);

  // Exit modal
  window.addEventListener('beforeunload',e=>{
    if(currentStep<sections.length-1){
      e.preventDefault();
      e.returnValue='';
      document.getElementById('exitModal').classList.add('active');
      return '';
    }
  });
  document.getElementById('closeExit').addEventListener('click',()=>{
    document.getElementById('exitModal').classList.remove('active');
  });
  document.getElementById('resumeExit').addEventListener('click',()=>{
    document.getElementById('exitModal').classList.remove('active');
  });

});
</script>

</body>
</html>
